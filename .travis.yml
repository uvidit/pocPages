language: java
sudo: false

script: echo 'bibooooo (from Project yaml file)'
deploy:
  provider: gae
  keyfile: super_secret.txt
  project: test-gce-prjct

  before_install:
  # If the SDK is not already cached, download it and unpack it
  - if [ ! -d ${HOME}/google-cloud-sdk ]; then
       curl https://sdk.cloud.google.com | bash;
    fi
  # Decrypt the credentials we added to the repo using the key we added with the Travis command line tool
  - openssl aes-256-cbc -K $encrypted_c5904ac432bd_key -iv $encrypted_c5904ac432bd_iv -in super_secret.txt.enc -out super_secret.txt -d
  - gsutil -m cp -r gs://${BUCKET_NAME}/** ./public/
  - bash ls ./public
  - git add --ignore-errors -- public/*.json



  # Skip cleanup so api_key.py and vendored dependencies are still there
  skip_cleanup: true

  provider: pages
  skip-cleanup: true
  github-token: $GITHUB_TOKEN  # Set in travis-ci.org dashboard, marked secure
  keep-history: true
  on:
    branch: master
  local_dir: public
  repo:  uvidit/pocProjectDocPages
  target-branch: gh-pages


